# Chapter 4, HTTPμ κµ¬μ΅° λ° ν•µμ‹¬ μ”μ†

Created: July 8, 2021

# HTTP

HTTPλ” μ›Ή μƒμ—μ„ μ„λ΅ λ‹¤λ¥Έ μ„λ²„κ°„μ— ν•μ΄νΌν…μ¤νΈ λ¬Έμ„, HTMLμ„ μ£Όκ³  λ°›μ„ μ μλ„λ΅ λ§λ“¤μ–΄μ§„ ν”„λ΅ν† μ½, ν†µμ‹  κ·μ•½μ΄λ‹¤.

## HTTP ν†µμ‹  λ°©μ‹

ν†µμ‹  λ°©μ‹μ—λ” 2κ°€μ§€ νΉμ§•μ΄ μμ. ν•λ‚λ” HTTPμ μ”μ²­κ³Ό μ‘λ‹µ λ°©μ‹μ΄κ³ , λ λ‹¤λ¥Έ νΉμ§•μ€ statelessλ‹¤.

1. requestμ™€ response λ°©μ‹
    
    httpλ¥Ό κΈ°λ°μΌλ΅ ν†µμ‹ ν•  λ–„ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² httpμ”μ²­μ„ λ³΄λ‚΄λ©΄ μ„λ²„λ” μ”μ²­μ„ μ²λ¦¬ν• ν›„ κ²°κ³Όμ— λ”°λ¥Έ μ‘λ‹µμ„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λƒ„μΌλ΅μ¨ httpν†µμ‹ μ΄ μ΄λ¤„μ§€κ² λ¨.
    
2. stateless
    
    ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” httpν†µμ‹ μ„ μ—¬λ¬ λ² μ£Όκ³ λ°›λ” κ²ƒμ΄ μΌλ°μ μ΄μ§€λ§ μ΄λ¬ν• ν†µμ‹ λ“¤μ€ λ™μΌν• ν΄λΌλ¦¬μ–ΈνΈλ‚ μ„λ²„λΌλ„ μ„λ΅ μ—°κ²°λμμ§€ μ•μ. **μ¦‰ κ°κ°μ httpν†µμ‹ μ€ λ…λ¦½μ μ΄λ©° μƒνƒλΌλ” κ°λ…μ΄ μ΅΄μ¬ν•μ§€ μ•μ.**
    
    λ΅κ·ΈμΈκ³Ό κ°™μ΄ μ΄μ „ ν†µμ‹ μ μ •λ³΄κ°€ ν•„μ”ν• κ²½μ° μΏ ν‚¤λ‚ μ„Έμ…λ“¤μ„ μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό μ €μ¥ν•μ—¬ httpμ”μ²­μ„ μ²λ¦¬ν•¨.
    

<aside>
π’΅ **μΏ ν‚¤μ™€ μ„Έμ…μ μ°¨μ΄μ **
μΏ ν‚¤μ™€ μ„Έμ… λ¨λ‘ httpν†µμ‹ μƒμ—μ„ ν•„μ”ν• λ°μ΄ν„°λ¥Ό μ €μ¥ν•λ” λ©”μ»¤λ‹μ¦μ΄λ‹¤. μΏ ν‚¤λ” μ›Ή λΈλΌμ°μ €, μ¦‰ ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ λ°μ΄ν„°λ¥Ό μ €μ¥ν•λ” λ°λ©΄μ— μ„Έμ…μ€ μ›Ή μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό μ €μ¥ν•λ‹¤.

</aside>

## HTTP μ”μ²­ κµ¬μ΅°

HTTP μ”μ²­ λ©”μ„Έμ§€λ” ν¬κ² λ‹¤μμ μ„Έ λ¶€λ¶„μΌλ΅ κµ¬μ„±λμ–΄ μλ‹¤.

1. Start Line
    
    ```python
    (ex): GET /search HTTP/1.1
    start lineμ€ μ„Έ λ¶€λ¶„μΌλ΅ κµ¬μ„±λμ–΄ μμ.
    1. HTTP Method: HTTP μ”μ²­μ΄ μλ„ν•λ” μ•΅μ…μ„ μ •μν•λ” λ¶€λ¶„.
    2. Request Target: ν•΄λ‹Ή HTTP μ”μ²­μ΄ μ „μ†΅λλ” λ©ν‘ μ£Όμ†
    3. HTTP version: λ²„μ „μ„ λ…μ‹ν•λ” μ΄μ λ” HTTPλ²„μ „μ— λ”°λΌ μ”μ²­ λ©”μ„Έμ§€μ κµ¬μ΅°λ‚ λ°μ΄ν„°κ°€ 
    μ•½κ°„μ”© λ‹¤λ¥Ό μ μκΈ° λ–„λ¬Έμ— μ„λ²„κ°€ λ°›μ€ μ”μ²­μ HTTP versionμ— λ”°λΌμ„ μ‘λ‹µν•κΈ° μ„ν•¨μ΄λ‹¤.
    ```
    
2. Headers
    
    ```python
    ν—¤λ” μ •λ³΄λ” HTTP μ”μ²­ κ·Έ μμ²΄μ— λ€ν• μ •λ³΄λ¥Ό λ‹΄κ³  μμ. 
    ν—¤λ”λ” νμ΄μ¬μ λ”•μ…”λ„λ¦¬μ²λΌ keyμ™€ valueλ΅ κµ¬μ„±λμ–΄μμ.
    μμ£Ό μ‚¬μ©λλ” ν—¤λ” μ •λ³΄λ” λ‹¤μκ³Ό κ°™μ.
    - HOST(νΈμ¤νΈμ URLμ£Όμ†)
    - User-Agent(μ”μ²­μ„ λ³΄λ‚΄λ” ν΄λΌμ΄μ–ΈνΈμ μ •λ³΄)
    - Accept(ν•΄λ‹Ή μ”μ²­μ΄ λ°›μ„ μ μλ” μ‘λ‹µ body λ°μ΄ν„° νƒ€μ…μ„ μ•λ ¤μ£Όλ” ν—¤λ”)
    - Connection(ν•΄λ‹Ή μ”μ²­μ΄ λλ‚ ν›„μ— ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ κ³„μ†ν•΄μ„ λ„¤νΈμ›ν¬ μ—°κ²°ν• μ§€λ¥Ό λ‚νƒ€λ‚΄λ” ν—¤λ”)
    - Connect-Type(HTTP μ”μ²­μ΄ λ³΄λ‚΄λ” λ©”μ„Έμ§€ bodyμ νƒ€μ…μ„ μ•λ ¤μ£Όλ” ν—¤λ”)
    ```
    
3. Body
    
    HTTP μ”μ²­μ΄ μ „μ†΅ν•λ” λ°μ΄ν„°λ¥Ό λ‹΄κ³  μλ” λ¶€λ¶„μ΄λ‹¤. μ „μ†΅ν•λ” λ°μ΄ν„°κ°€ μ—†λ‹¤λ©΄ body λ¶€λ¶„μ€ λΉ„μ–΄μκ² λλ‹¤.
    

## HTTP μ‘λ‹µ κµ¬μ΅°

μ‘λ‹µ λ©”μ„Έμ§€μ κµ¬μ΅°λ„ μ”μ²­ λ©”μ„Έμ§€μ™€ λ§μ°¬κ°€μ§€λ΅ ν¬κ² μ„Έ λ¶€λ¶„μΌλ΅ κµ¬μ„±λμ–΄ μλ‹¤. 

## μμ£Ό μ‚¬μ©λλ” HTTP λ©”μ†λ“

- GET
    
    μ–΄λ– ν• λ°μ΄ν„°λ¥Ό μ„λ²„λ΅λ¶€ν„° μ”μ²­ν•  λ• μ£Όλ΅ μ‚¬μ©λλ” λ©”μ†λ“. μ¦‰ λ°μ΄ν„°μ μƒμ„±μ΄λ‚ μμ • κ·Έλ¦¬κ³  μ‚­μ λ“±μ λ³€κ²½ μ‚¬ν•­ μ—†μ΄ λ‹¨μν λ°μ΄ν„°λ¥Ό λ°›μ•„ μ¤λ” μ”μ²­
    
- POST
    
    GETκ³Ό λ‹¤λ¥΄κ² λ°μ΄ν„°λ¥Ό μƒμ„±ν•κ±°λ‚ μμ • λ° μ‚­μ  μ”μ²­μ„ ν•  λ–„ μ‚¬μ©λλ” λ©”μ†λ“
    
    PUT(μƒμ„±), DELETE(μ‚­μ ) λ©”μ†λ“λ“¤μ΄ μμ§€λ§ POSTλ΅ ν†µμΌν•΄μ„ μ‚¬μ©ν•¨.
    
- OPTIONS
    
    νΉμ • μ—”λ“ν¬μΈνΈμ—μ„ ν—μ©ν•λ” λ©”μ†λ“λ“¤μ΄ λ¬΄μ—‡μ΄ μλ”μ§€ μ•κ³ μ ν•λ” μ”μ²­μ—μ„ μ‚¬μ©λλ” λ©”μ†λ“.
    
    μ—”λ“ν¬μΈνΈλ” ν—μ©ν•λ” λ©”μ†λ“κ°€ μ§€μ •λλ„λ΅ λμ–΄ μμΌλ©°, ν—μ©ν•μ§€ μ•λ” λ©”μ†λ“μ μ”μ²­μ΄ λ“¤μ–΄μ¬μ‹ `405 Method Not Allowed` μ‘λ‹µμ„ λ³΄λ‚΄κ² λλ‹¤.
    

## μμ£Ό μ‚¬μ©λλ” HTTP Status Codeμ™€ Text

λ©”μ†λ“λ¥Ό μ μ΄ν•΄ν•λ” λ§νΌ status codeμ™€ textλ¥Ό μ μ΄ν•΄ν•μ—¬ μ μ ν• μ‘λ‹µμ„ λ³΄λ‚΄λ” κ²ƒ λν• μ¤‘μ”ν•λ‹¤.

- `200 OK` , HTTPμ”μ²­μ΄ μ„±κ³µμ μΌλ΅ μ²λ¦¬λμ—μ„ λ–„ λ³΄λ‚΄λ” status code
- `301 Moved Permanently` , HTTP μ”μ²­μ„ λ³΄λ‚Έ μ—”λ“ν¬μΈνΈμ URLμ£Όμ†κ°€ λ°”λ€μ—λ‹¤λ” κ²ƒμ„ λ‚νƒ€λƒ„, μ΄ λ–„ μƒλ΅μ΄ μ£Όμ†κ°€ Location ν—¤λ”μ— ν¬ν•¨λμ–΄ λ‚νƒ€λ‚¨.
- `400 Bad Request`, μλ»λ μ”μ²­μΌ λ–„ λ³΄λ‚΄λ” μ‘λ‹µ μ½”λ“
- `401 Unauthorized`, ν•΄λ‹Ή μ”μ²­μ„ λ³΄λ‚΄λ” μ£Όμ²΄μ μ‹ λ¶„ ν™•μΈμ΄ μ”κµ¬λκ±°λ‚ ν™•μΈν•  μ μ—†μ„λ–„ λ³΄λ‚΄λ” μ‘λ‹µ μ½”λ“
- `403 Forbidden`, μ”μ²­μ„ λ³΄λ‚΄λ” μ£Όμ²΄κ°€ ν•΄λ‹Ήμ”μ²­μ— λ€ν• κ¶ν•μ΄ μ—†μμ„ λ‚νƒ€λ‚΄λ” μ‘λ‹µ μ½”λ“
- `404 Not Found`, μ”μ²­μ„ λ³΄λ‚΄κ³ μ ν•λ” URIκ°€ μ΅΄μ¬ν•μ§€ μ•μ„ λ• λ³΄λ‚΄λ” μ‘λ‹µ μ½”λ“
- `500 Internal Server Error`, λ‚΄λ¶€ μ„λ²„ μ¤λ¥κ°€ λ°μƒν–λ‹¤λ” κ²ƒμ„ μ•λ ¤μ£Όλ” μ‘λ‹µ μ½”λ“

## API μ—”λ“ν¬μΈνΈ μ•„ν‚¤ν…μ² ν¨ν„΄

APIμ μ—”λ“ν¬μΈνΈ κµ¬μ΅°λ¥Ό κµ¬ν„ν•λ” λ°©μ‹μ—λ” ν¬κ² 2κ°€μ§€κ°€ μλ”λ° ν•λ‚λ” REST λ°©μ‹μ΄κ³  λ‹¤λ¥Έ ν•λ‚λ” GraphQLμ΄λ‹¤.

### RESTful HTTP API

RESTful APIλ” APIμ—μ„ μ „μ†΅ν•λ” λ¦¬μ†μ¤λ¥Ό URIλ΅ ν‘ν„ν•κ³  ν•΄λ‹Ή λ¦¬μ†μ¤μ— ν–‰ν•κ³ μ ν•λ” μλ„λ¥Ό HTTP λ©”μ†λ“λ΅ μ •μν•λ” λ°©μ‹.

κ° μ—”λ“ν¬μΈνΈλ” μ²λ¦¬ν•λ” λ¦¬μ†μ¤λ¥Ό ν‘ν„ν•λ” κ³ μ μ URIμ£Όμ†λ¥Ό κ°€μ§€κ³  μμΌλ©°, ν•΄λ‹Ή λ¦¬μ†μ¤μ— ν–‰ν•  μ μλ” ν–‰μ„λ¥Ό ν‘ν„ν•λ” HTTPλ©”μ†λ“λ¥Ό μ²λ¦¬ν•  μ μκ² λλ‹¤.

μ΄λ¥Ό ν†µν• μ¥μ μ€ μκΈ°μ„¤λ…λ ¥, μ¦‰ μ—”λ“ν¬μΈνΈμ κµ¬μ΅°λ§ λ³΄λ”λΌλ„ ν•΄λ‹Ή μ—”λ“ν¬μΈνΈκ°€ μ κ³µν•λ” λ¦¬μ†μ¤μ™€ κΈ°λ¥μ„ νμ•…ν•  μ μμ.

### GraphQL

κΈ°μ΅΄ REST APIλ°©μ‹μ λ¬Έμ μ μ€ APIμ κµ¬μ΅°κ°€ νΉμ • ν΄λΌμ΄μ–ΈνΈμ— λ§μ¶”μ–΄μ Έμ„ λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈμ— μ‚¬μ©ν•κΈ°μ— μ ν•©ν•μ§€ μ•μ. μ¦‰ λ¨λ°”μΌκ³Ό λ°μ¤ν¬νƒ‘ μ•± κ°λ°μ— μμ–΄μ„ κµ¬ν„ν•΄λ†“μ€ ν‹€μ— λ§μ¶”μ–΄ μ‚¬μ©ν•μ—¬μ•Ό ν•λ‹¤ λ³΄λ‹ κ·Έ ν‹€μ—μ„ λ²—μ–΄λ‚λ” μ‚¬μ©μ΄ μ–΄λ ¤μ›μ Έ μμ λ„κ°€ λ–¨μ–΄μ§.

GraphQLμ€ RESTλ°©μ‹μ APIκ³Όλ” λ‹¤λ¥΄κ² μ—”λ“ν¬μΈνΈκ°€ μ¤μ§ ν•λ‚λ‹¤. κ·Έλ¦¬κ³  μ—”λ“ν¬μΈνΈμ— ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν• κ²ƒμ„ μ •μν•΄μ„ μ”μ²­ν•λ” μ‹μ΄λ‹¤.  μ¦‰ μ„λ²„κ°€ μ •μν• ν‹€μ—μ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν•λ” κ²ƒμ΄ μ•„λ‹λΌ ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν• κ²ƒμ„ μ„λ²„μ— μ”μ²­ν•λ” λ°©μ‹

### μ°¨μ΄μ 

```
# REST λ°©μ‹μ API
GET /users/1
GET /users/1/friends

# ν• μ¤„λ΅ μ‘μ„±
GET /users/1?include=friends.name 

-> λ‘ λ‹¤ λΉ„ν¨μ¨μ μ΄κ³  λ³µμ΅ν•¨. μ‚¬μ©μ μ •λ³΄λ“¤ μ¤‘ λ‹¤ ν•„μ”ν•μ§€ μ•μ„ μλ„ μκ³ , 
μ΄λ¦„λ§ ν•„μ”ν•κ±°λ‚ νΉμ€ μ΄λ©”μΌλ„ ν•„μ”ν•κ² λλ‹¤λ©΄ HTTP μ”μ²­μ΄ λ” λ³µμ΅ν•΄μ§

# GraphQL
POST /graphql
{
	user(id: 1){
		name
		age
		friends {
			name
		}
	}
}
```